# Зберігання та управління даними

## Які дані збираються та для чого?

Ми збираємо мінімально необхідні дані для забезпечення функціональності MVP, що допомагає студентам у працевлаштуванні.

### Ідентифікаційні дані
- **ПІБ (Повне ім'я):** Для персоналізації профілю, відображення на дашборді та включення в CV.
- **Email:** Для входу (через Google OAuth), зв'язку з користувачем та унікальної ідентифікації.
- **Google ID:** Унікальний ідентифікатор, наданий Google OAuth, використовується для реєстрації та входу.

### Професійні дані
- **Посилання на профілі (GitHub, LinkedIn, Portfolio):** Для включення в CV та надання повного уявлення про професійні досягнення.
- **Освіта (установа, ступінь, спеціальність, дати, опис):** Для формування розділу освіти в CV.
- **Досвід роботи (посада, компанія, локація, дати, опис):** Для формування розділу досвіду роботи в CV.
- **Навички (скіли):** Для відображення навичок у профілі та CV.
- **Проєкти (назва, опис, посилання):** Для демонстрації практичного досвіду в CV.

### Дані про прогрес та активність
- **Результати інтерв'ю (дата, оцінка, відгук):** Для відстеження прогресу в симуляторі інтерв'ю та надання зворотного зв'язку.
- **Результати тренажера/квізу (назва квізу, оцінка, дата):** Для відстеження прогресу в навчальних модулях.

### Конфігураційні та технічні дані
- **Дані CV (шаблон, структура контенту):** Зберігається вміст, який користувач ввів або згенерував для свого CV.
- **Статус згоди на аналітику (optInAnalytics):** Булеве значення, що вказує, чи надав користувач згоду на анонімний збір аналітичних даних. За замовчуванням вимкнено.
- **Часові мітки (createdAt, updatedAt):** Автоматично додаються до всіх записів для відстеження часу створення та останньої модифікації.

## Як і де зберігаються дані?

- **База даних:** Всі дані зберігаються у MongoDB – документо-орієнтованій базі даних.
- **Колекція `users`:** Зберігає дані користувача (ПІБ, email, посилання, освіта, досвід, скіли, проєкти, результати інтерв'ю/тренажера, Google ID, статус аналітики, часові мітки). Кожен користувач має один запис.
- **Колекція `cvs`:** Зберігає дані CV (ідентифікатор користувача, назва шаблону, вміст CV, посилання на PDF, часові мітки). Кожне CV користувача має окремий запис та пов'язане через поле `userId`.

## Як стерти дані користувача?

### Видалення облікового запису та всіх пов'язаних даних
- Надішліть `DELETE` запит на ендпоінт `/users`.
- Вимагається автентифікація (JWT токен).
- При успішному виконанні всі ваші дані (профіль, Google ID, результати інтерв'ю та тренажерів, всі збережені CV) будуть безповоротно видалені.
- **Примітка:** Фронтенд повинен вимагати підтвердження цієї дії від користувача.

### Видалення окремого CV
- Надішліть `DELETE` запит на ендпоінт `/cvs/:id`, де `:id` — це ID конкретного CV.
- Вимагається автентифікація.

## Конфіденційність та безпека

- **Паролі:** Паролі не зберігаються у відкритому вигляді. Автентифікація здійснюється через Google OAuth.
- **Публічні шари:** За замовчуванням публічні шари вимкнені.
- **Аналітика:** Збір аналітичних даних вимкнений за замовчуванням. Включається тільки за явною згодою (opt-in) через ендпоінт `PUT /users/analytics-opt-in`.
- **Доступ до даних:** Можливий лише після успішної автентифікації за допомогою JWT токену.

# API Ендпоінти

## Автентифікація (`/auth`)

- **POST /auth/google-login**  
  Вхід або реєстрація через Google OAuth.  
  **Приймає:** `googleId`, `email`, `fullName`, `profilePicture` (отримані після успішної Google автентифікації).  
  **Повертає:** JWT токен.

- **GET /auth/me**  
  Отримати профіль поточного користувача.  
  **Вимагає:** JWT токен.

## Користувачі (`/users`) *(потрібна автентифікація)*

- **GET /users**  
  Отримати деталі профілю поточного користувача.

- **PUT /users**  
  Оновити профіль поточного користувача.

- **DELETE /users**  
  Видалити поточного користувача та всі пов'язані дані.

- **POST /users/interview-results**  
  Додати новий результат інтерв'ю.

- **POST /users/quiz-results**  
  Додати новий результат квізу/тренажера.

- **PUT /users/analytics-opt-in**  
  Оновити статус згоди на аналітику.

## CV (`/cvs`) *(потрібна автентифікація)*

- **POST /cvs**  
  Створити нове CV.

- **GET /cvs**  
  Отримати всі CV поточного користувача.

- **GET /cvs/:id**  
  Отримати конкретне CV за ID.

- **PUT /cvs/:id**  
  Оновити CV за ID.

- **DELETE /cvs/:id**  
  Видалити CV за ID.
